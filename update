#!/bin/bash
#
# For updating your package, you should run this script.
# 
# The folder structure should look something like this:
# 
# ➜ tree                                                       
# ├── beatmapexporter-bin
# │   ├── BeatmapExporter
# │   ├── beatmapexporter.desktop
# │   ├── PKGBUILD
# │   ├── pkg
# │   │   └── ...
# │   └── src
# │       └── ...
# ├── beatmapexporter-cli-bin
# │   ├── BeatmapExporterCLI
# │   ├── PKGBUILD
# │   ├── pkg
# │   │   └── ...
# │   └── src
# │       └── ...
# └── aur-update
#     ├── LICENSE
#     ├── update
#     ├── update-files
#     ├── update-hash
#     ├── update-ver
#     ├── update-srcinfo
#     └── update-repo
# 
# 
#


succ() { echo -e "\e[1;32m==>\e[0m \e[1m$1\e[0m"; }
eror() { echo -e "\e[1;31m!!>\e[0m \e[1m$1\e[0m"; }
warn() { echo -e "\e[1;33m-->\e[0m \e[1m$1\e[0m"; }
info() { echo -e "\e[1;35m ->\e[0m \e[1m$1\e[0m"; }

set -euo pipefail

cd ..


#
#   ███████████  ███  ████
#  ░░███░░░░░░█ ░░░  ░░███
#   ░███   █ ░  ████  ░███   ██████   █████
#   ░███████   ░░███  ░███  ███░░███ ███░░
#   ░███░░░█    ░███  ░███ ░███████ ░░█████
#   ░███  ░     ░███  ░███ ░███░░░   ░░░░███
#   █████       █████ █████░░██████  ██████
#  ░░░░░       ░░░░░ ░░░░░  ░░░░░░  ░░░░░░
#
# downloads files from releases
./update-files

#
#   █████   █████                   █████
#  ░░███   ░░███                   ░░███
#   ░███    ░███   ██████    █████  ░███████
#   ░███████████  ░░░░░███  ███░░   ░███░░███
#   ░███░░░░░███   ███████ ░░█████  ░███ ░███
#   ░███    ░███  ███░░███  ░░░░███ ░███ ░███
#   █████   █████░░████████ ██████  ████ █████
#  ░░░░░   ░░░░░  ░░░░░░░░ ░░░░░░  ░░░░ ░░░░░
#
# calculates hash and puts it in PKGBUILD
./update-hash

#
#   █████   █████
#  ░░███   ░░███
#   ░███    ░███   ██████  ████████
#   ░███    ░███  ███░░███░░███░░███
#   ░░███   ███  ░███████  ░███ ░░░
#    ░░░█████░   ░███░░░   ░███
#      ░░███     ░░██████  █████
#       ░░░       ░░░░░░  ░░░░░
#
# updates the version of software
./update-ver

#
#    █████████  █████ ██████   █████ ███████████    ███████
#   ███░░░░░███░░███ ░░██████ ░░███ ░░███░░░░░░█  ███░░░░░███
#  ░███    ░░░  ░███  ░███░███ ░███  ░███   █ ░  ███     ░░███
#  ░░█████████  ░███  ░███░░███░███  ░███████   ░███      ░███
#   ░░░░░░░░███ ░███  ░███ ░░██████  ░███░░░█   ░███      ░███
#   ███    ░███ ░███  ░███  ░░█████  ░███  ░    ░░███     ███
#  ░░█████████  █████ █████  ░░█████ █████       ░░░███████░
#   ░░░░░░░░░  ░░░░░ ░░░░░    ░░░░░ ░░░░░          ░░░░░░░
#
# updates SRCINFO to update SRCINFO
./update-srcinfo

#
#   ███████████
#  ░░███░░░░░███
#   ░███    ░███   ██████  ████████   ██████
#   ░██████████   ███░░███░░███░░███ ███░░███
#   ░███░░░░░███ ░███████  ░███ ░███░███ ░███
#   ░███    ░███ ░███░░░   ░███ ░███░███ ░███
#   █████   █████░░██████  ░███████ ░░██████
#  ░░░░░   ░░░░░  ░░░░░░   ░███░░░   ░░░░░░
#                          ░███
#                          █████
#                         ░░░░░
#
# pushes the changes to aur
./update-repo
